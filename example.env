# Chromium Browser Configuration

# Copy this file to .env and adjust values as needed

# ============================================================================

# REQUIRED SETTINGS

# ============================================================================

# CDP (Chrome DevTools Protocol) listening address

# Use 127.0.0.1 for localhost only (recommended for security)

CHROMIUM_CDP_ADDRESS=127.0.0.1

# CDP listening port

# Choose any available port (9222 is Chrome default, 9226 avoids conflicts)

CHROMIUM_CDP_PORT=9220

# Initial URL to open when browser starts

# Options: about:blank, https://example.com, etc.

CHROMIUM_START_URL=https://www.tradingview.com/

# ============================================================================

# OPTIONAL SETTINGS (will use defaults if not specified)

# ============================================================================

# Profile directory for browser data

# Default: ./chromium-profile

# This keeps test browsing isolated from your personal browser data

CHROMIUM_PROFILE_DIR=./chromium-profile

# Directory for Chromium debug log files

# Default: logs

# Used when running with --with-logs flag

CHROMIUM_LOG_FILE_DIR=logs

# Enable Chromium crash reporter flags.
# Default: false (recommended on sandboxed Linux; avoids Crashpad SIGTRAP crashes).
CHROMIUM_ENABLE_CRASH_REPORTER=false

# MCP server type for browser automation

# Default: playwright

# Options:

# - playwright: Uses @playwright/mcp for browser automation

# - chrome-devtools: Uses chrome-devtools-mcp for browser control

CHROMIUM_MCP_SERVER=playwright

# ============================================================================

# RESEARCHER SETTINGS

# ============================================================================

# Base directory for passive capture output
RESEARCHER_DATA_DIR=./research_data

# Only attach to tabs whose URL contains this value
RESEARCHER_TAB_URL_FILTER=tradingview.com

# Reload matched tabs right after attaching (captures initial resources)
RESEARCHER_RELOAD_ON_ATTACH=true

# JSONL rotation size in MB
RESEARCHER_MAX_FILE_SIZE_MB=200

# Async writer channel buffer size
RESEARCHER_BUFFER_SIZE=5000

# Capture toggles
RESEARCHER_CAPTURE_HTTP=true
RESEARCHER_CAPTURE_WS=true
RESEARCHER_CAPTURE_STATIC=true

# Very high payload caps (bytes)
RESEARCHER_HTTP_MAX_BODY_BYTES=52428800
RESEARCHER_WS_MAX_FRAME_BYTES=20971520
RESEARCHER_RESOURCE_MAX_BYTES=104857600

# ============================================================================
# CONTROLLER SETTINGS (Huma API -> CDP -> TradingView JS)
# ============================================================================

# Auto-launch browser from controller (single-command startup).
# Default: false (requires separate `just start-browser`)
CONTROLLER_LAUNCH_BROWSER=false

# Bind address for controller HTTP server.
CONTROLLER_BIND_ADDR=127.0.0.1:8188

# Filter chart tabs for controller operations.
CONTROLLER_TAB_URL_FILTER=tradingview.com

# Per-call in-page JS evaluation timeout in milliseconds.
CONTROLLER_EVAL_TIMEOUT_MS=5000

# Controller logging level: debug|info|warn|error
CONTROLLER_LOG_LEVEL=info

# Controller log file path
CONTROLLER_LOG_FILE=logs/tv_controller.log

# Directory for chart snapshot storage
SNAPSHOT_DIR=./snapshots
